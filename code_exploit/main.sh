#!/bin/bash

#
# Administration script to be called by the webserver to display 
# system information

#Same regex as create_task script. Must be checked
REGEX="^[0-9]{2}-[a-z]{6}\.sh"

menu_path="/netsec/Laboratoire/code_exploit/menu_entry"
declare -a menu_entries

for file in "${menu_path}/*.sh"
do 
	menu_entries+=($file)
done	

PS3="Please select an option : "

select task in "${menu_entries[@]##*/}"
do 
	if [[ ${task} =~ ${REGEX} ]];then 
#Is this a security issue ??
# eval or source ? 
		eval "${menu_path}/${task}"
		#source ${menu_path}/$task
		exit
	fi
done

#!/bin/bash 

REGEX="^[0-9]{2}-[a-z]{6}\.sh"
menu_path="/netsec/Laboratoire/code_exploit/menu_entry"



function print_usage(){
cat << EOF
-- 
Usage : $0 -f {filename} -c "{your command here}"
EOF
}

[[ $# -lt 1 ]] && print_usage

while getopts "f:c:" option
do 
	case "${option}" in
		f) task_name="$OPTARG"
		;;
		c) command_name="$OPTARG"
		;;
		*) print_usage
		;;
	esac
done


task_number=$(ls ${menu_path} | wc -l)
[[ $task_number -lt 10 ]] && task_number="0$((task_number+1))"

task_file="${task_number}-${task_name}.sh"

[[ ${task_file} =~ ${REGEX} ]] &&  echo "${command_name}" >> ${menu_path}/${task_file} 

